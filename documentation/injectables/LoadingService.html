<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>olympic-games-starter documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">olympic-games-starter documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >LoadingService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/services/loading.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Service de loading (message d&#39;attente) partagé réactif chargé de contrôler un indicateur de chargement, de l&#39;activer
et de le désactiver en fonction du cycle de vie des observables qui lui sont fournis. Ce service fournit un
observable <code>loading$</code> qui peut être utilisé pour surveiller l&#39;état actif de l&#39;indicateur de chargement.
Il encapsule également la logique permettant de contrôler l&#39;état de chargement pendant le fonctionnement des
observables fournis.</p>
<p>Le but est de rendre très simple, pour les composants à différents niveaux de l&#39;arborescence des composants,
d&#39;interagir avec ce composant d&#39;une manière découplée.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#loading$" >loading$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#loadingSubject" >loadingSubject</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#loadingOff" >loadingOff</a>
                            </li>
                            <li>
                                <a href="#loadingOn" >loadingOn</a>
                            </li>
                            <li>
                                <a href="#showLoaderUntilCompleted" >showLoaderUntilCompleted</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/core/services/loading.service.ts:31</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadingOff"></a>
                    <span class="name">
                        <span ><b>loadingOff</b></span>
                        <a href="#loadingOff"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>loadingOff()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="41"
                                    class="link-to-prism">src/app/core/services/loading.service.ts:41</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadingOn"></a>
                    <span class="name">
                        <span ><b>loadingOn</b></span>
                        <a href="#loadingOn"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>loadingOn()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="37"
                                    class="link-to-prism">src/app/core/services/loading.service.ts:37</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showLoaderUntilCompleted"></a>
                    <span class="name">
                        <span ><b>showLoaderUntilCompleted</b></span>
                        <a href="#showLoaderUntilCompleted"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>showLoaderUntilCompleted(observable$: Observable<T>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="56"
                                    class="link-to-prism">src/app/core/services/loading.service.ts:56</a></div>
                        </td>
                    </tr>

                    <tr>
                        <td class="col-md-4">
                            <b>Type parameters :</b>
                            <ul class="type-parameters">
                                    <li>T</li>
                            </ul>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>va prendre comme argument d&#39;entrée un observable qui est l&#39;observable dont nous voulons suivre
le cycle de vie afin de décider si l&#39;indicateur de loading doit être utilisé ou non.
Et nous allons renvoyer comme sortie de cette méthode, un autre observable du même type.
Et cet observable que nous renvoyons ici va avoir des capacités d&#39;indicateur de chargement.
Ainsi, ces nouveaux observables pourront activer et désactiver l&#39;indicateur de chargement au moment approprié.
Comme ces méthodes devraient être compatibles avec les observables de tout type, nous définissons un
type générique, en ajoutant ici un argument de type générique à notre fonction.
Ainsi, nous pourrons avoir du code de type sécurisé avec n’importe quel type d’observable.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>observable$</td>
                                            <td>
                                                        <code>Observable&lt;T&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Observable&lt;T&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loading$"></a>
                    <span class="name">
                        <span ><b>loading$</b></span>
                        <a href="#loading$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.loadingSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/core/services/loading.service.ts:31</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>dérive un observable du loadingSubject, qui émet exactement les mêmes valeurs que le sujet,
mais ce sera simplement un observable ; donc l&#39;observable loading$ ne nous permettra pas de contrôler
quelles valeurs sont émises avec le loadingSubject.
Nous pourrons uniquement nous y abonner et être avertis lorsque de nouvelles valeurs seront
disponibles tout en conservant la capacité d&#39;émettre de nouvelles valeurs observables
à l&#39;intérieur du LoadingService (via loadingSubject privé).</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadingSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>loadingSubject</b></span>
                        <a href="#loadingSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;boolean&gt;(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/core/services/loading.service.ts:21</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import {BehaviorSubject, concatMap, finalize, Observable, of} from &quot;rxjs&quot;;
import {tap} from &quot;rxjs/operators&quot;;

/**
 * Service de loading (message d&#x27;attente) partagé réactif chargé de contrôler un indicateur de chargement, de l&#x27;activer
 * et de le désactiver en fonction du cycle de vie des observables qui lui sont fournis. Ce service fournit un
 * observable &lt;code&gt;loading$&lt;/code&gt; qui peut être utilisé pour surveiller l&#x27;état actif de l&#x27;indicateur de chargement.
 * Il encapsule également la logique permettant de contrôler l&#x27;état de chargement pendant le fonctionnement des
 * observables fournis.
 *
 * Le but est de rendre très simple, pour les composants à différents niveaux de l&#x27;arborescence des composants,
 * d&#x27;interagir avec ce composant d&#x27;une manière découplée.
 */
//on ne veut pas Singleton car potentiellement plusieurs instances
// @Injectable({
//   providedIn: &#x27;root&#x27;
// })
@Injectable()
export class LoadingService {
  private loadingSubject &#x3D; new BehaviorSubject&lt;boolean&gt;(false);

  /**
   * dérive un observable du loadingSubject, qui émet exactement les mêmes valeurs que le sujet,
   * mais ce sera simplement un observable ; donc l&#x27;observable loading$ ne nous permettra pas de contrôler
   * quelles valeurs sont émises avec le loadingSubject.
   * Nous pourrons uniquement nous y abonner et être avertis lorsque de nouvelles valeurs seront
   * disponibles tout en conservant la capacité d&#x27;émettre de nouvelles valeurs observables
   * à l&#x27;intérieur du LoadingService (via loadingSubject privé).
   */
  loading$ &#x3D; this.loadingSubject.asObservable();

  constructor() {
    //console.log(&quot;LoadingService created ...&quot;);
  }

  loadingOn() {
    this.loadingSubject.next(true);
  }

  loadingOff() {
    this.loadingSubject.next(false);
  }

  /**
   * va prendre comme argument d&#x27;entrée un observable qui est l&#x27;observable dont nous voulons suivre
   * le cycle de vie afin de décider si l&#x27;indicateur de loading doit être utilisé ou non.
   * Et nous allons renvoyer comme sortie de cette méthode, un autre observable du même type.
   * Et cet observable que nous renvoyons ici va avoir des capacités d&#x27;indicateur de chargement.
   * Ainsi, ces nouveaux observables pourront activer et désactiver l&#x27;indicateur de chargement au moment approprié.
   * Comme ces méthodes devraient être compatibles avec les observables de tout type, nous définissons un
   * type générique, en ajoutant ici un argument de type générique à notre fonction.
   * Ainsi, nous pourrons avoir du code de type sécurisé avec n’importe quel type d’observable.
   * @param observable$
   */
  showLoaderUntilCompleted&lt;T&gt;(observable$: Observable&lt;T&gt;): Observable&lt;T&gt; {
    //console.log(&#x27;showLoaderUntilCompleted()&#x27;);
    return of(null)//on crée un observable null qui se complète/termine immédiatement et on enchaine avec le flux en argument
      .pipe(
        tap(() &#x3D;&gt; this.loadingOn()),//effet secondaire : on déclenche loadingOn() qui affiche l&#x27;indicateur
        concatMap(() &#x3D;&gt; observable$),//les valeurs émises par le résultat observable vont être identiques
        // aux valeurs émises par l&#x27;observable d&#x27;entrée, à l&#x27;exception du fait
        // que l&#x27;indicateur de chargement a déjà été activé (via
        // loadingSubject défini dans loadingOn).
        finalize(() &#x3D;&gt; this.loadingOff()) //lorsque cette entrée observable$ se termine ou génère une erreur,
        //on désactive l&#x27;indicateur de loading
      );
    //l&#x27;observable retourné sera de même type que l&#x27;observable$ en entrée
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'LoadingService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
